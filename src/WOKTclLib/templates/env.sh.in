echo off

aScriptPath=${BASH_SOURCE%/*}; if [ -d "${aScriptPath}" ]; then cd "$aScriptPath"; fi; aScriptPath="$PWD";

FREETYPE_DIR="@3RDPARTY_FREETYPE_DLL_DIR@"
FTGL_DIR="@3RDPARTY_FTGL_DLL_DIR@"
GL2PS_DIR="@3RDPARTY_GL2PS_DLL_DIR@"

TBB_DIR="@3RDPARTY_TBB_DLL_DIR@"
FREEIMAGE_DIR="@3RDPARTY_FREEIMAGE_DLL_DIR@"

TCL_DIR="@3RDPARTY_TCL_DLL_DIR@"

LD_LIBRARY_PATH="$LD_LIBRARY_PATH:$FREETYPE_DIR:$FTGL_DIR:$GL2PS_DIR:$FREEIMAGE_DIR:$TBB_DIR:$TCL_DIR:$aScriptPath/lib"

# ----- Set path to 3rd party and OCCT libraries -----
PATH="${PATH}:$aScriptPath/bin"


# ----- Setup Environment Variables -----
anArch=`uname -m`
if [ "$anArch" != "x86_64" ] && [ "$anArch" != "ia64" ]; then
  export ARCH="32";
else
  export ARCH="64";
fi

aSystem=`uname -s`
if [ "$aSystem" == "Darwin" ]; then
  export WOKSTATION="mac";
  export ARCH="64";
else
  export WOKSTATION="lin";
fi

# ----- Set envoronment variables used by OCCT -----
export CSF_MDTVFontDirectory="${aScriptPath}/res/FontMFT"
export CSF_LANGUAGE=us
export MMGT_CLEAR=1
export CSF_EXCEPTION_PROMPT=1
export CSF_SHMessage="${aScriptPath}/res/SHMessage"
export CSF_MDTVTexturesDirectory="${aScriptPath}/res/Textures"
export CSF_XSMessage="SCRIPTROOT/res/XSMessage"
export CSF_TObjMessage="SCRIPTROOT/res/TObj"
export CSF_StandardDefaults="${aScriptPath}/res/StdResource"
export CSF_PluginDefaults="${aScriptPath}/res/StdResource"
export CSF_XCAFDefaults="${aScriptPath}/res/StdResource"
export CSF_TObjDefaults="${aScriptPath}/res/StdResource"
export CSF_StandardLiteDefaults="${aScriptPath}/res/StdResource"
if [ "$WOKSTATION" == "mac" ]; then
  export CSF_GraphicShr="libTKOpenGl.dylib"
else
  export CSF_GraphicShr="libTKOpenGl.so"
fi
export CSF_UnitsLexicon="${aScriptPath}/res/UnitsAPI/Lexi_Expr.dat"
export CSF_UnitsDefinition="${aScriptPath}/res/UnitsAPI/Units.dat"
export CSF_IGESDefaults="${aScriptPath}/res/XSTEPResource"
export CSF_STEPDefaults="${aScriptPath}/res/XSTEPResource"
export CSF_XmlOcafResource="${aScriptPath}/res/XmlOcafResource"
export CSF_MIGRATION_TYPES="${aScriptPath}/res/StdResource/MigrationSheet.txt"

# Draw Harness special stuff
if [ -e "${aScriptPath}/res/DrawResources" ]; then
  export DRAWHOME="${aScriptPath}/res/DrawResources"
  export CSF_DrawPluginDefaults="${aScriptPath}/res/DrawResources"
    
  if [ -e "${aScriptPath}/res/DrawResources/DrawDefault" ]; then
    export DRAWDEFAULT="${aScriptPath}/res/DrawResources/DrawDefault"
  fi
fi

if [ -e "${aScriptPath}/res/DrawResourcesProducts" ]; then
  export CSF_DrawPluginProductsDefaults="${aScriptPath}/res/DrawResourcesProducts"
fi