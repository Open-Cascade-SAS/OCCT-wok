echo off

set "SCRIPTROOT=%~dp0"
set "SCRIPTROOT=%SCRIPTROOT:~0,-1%"

@CASROOT_DEFINITION@

set "FREETYPE_DIR=@3RDPARTY_FREETYPE_DLL_DIR@"
set "GL2PS_DIR=@3RDPARTY_GL2PS_DLL_DIR@"

set "TBB_DIR=@3RDPARTY_TBB_DLL_DIR@"
set "FREEIMAGE_DIR=@3RDPARTY_FREEIMAGE_DLL_DIR@"

set "TCL_DIR=@3RDPARTY_TCL_DLL_DIR@"

set "PATH=%FREETYPE_DIR%;%GL2PS_DIR%;%FREEIMAGE_DIR%;%TBB_DIR%;%TCL_DIR%;%PATH%"

rem ----- Set path to 3rd party and OCCT libraries -----
set "PATH=%SCRIPTROOT%\@BIN_DIR_POSTFIX@;%PATH%"

rem ----- Set envoronment variables used by OCCT -----
set  CSF_LANGUAGE=us
set  MMGT_CLEAR=1
set  CSF_EXCEPTION_PROMPT=1
set "CSF_SHMessage=@RESOURCE_DIR_PREFIX@\SHMessage"
set "CSF_MDTVTexturesDirectory=@RESOURCE_DIR_PREFIX@\Textures"
set "CSF_ShadersDirectory=@RESOURCE_DIR_PREFIX@\Shaders"
set "CSF_XSMessage=@RESOURCE_DIR_PREFIX@\XSMessage"
set "CSF_TObjMessage=@RESOURCE_DIR_PREFIX@\TObj"
set "CSF_StandardDefaults=@RESOURCE_DIR_PREFIX@\StdResource"
set "CSF_PluginDefaults=@RESOURCE_DIR_PREFIX@\StdResource"
set "CSF_XCAFDefaults=@RESOURCE_DIR_PREFIX@\StdResource"
set "CSF_TObjDefaults=@RESOURCE_DIR_PREFIX@\StdResource"
set "CSF_StandardLiteDefaults=@RESOURCE_DIR_PREFIX@\StdResource"
set "CSF_UnitsLexicon=@RESOURCE_DIR_PREFIX@\UnitsAPI\Lexi_Expr.dat"
set "CSF_UnitsDefinition=@RESOURCE_DIR_PREFIX@\UnitsAPI\Units.dat"
set "CSF_IGESDefaults=@RESOURCE_DIR_PREFIX@\XSTEPResource"
set "CSF_STEPDefaults=@RESOURCE_DIR_PREFIX@\XSTEPResource"
set "CSF_XmlOcafResource=@RESOURCE_DIR_PREFIX@\XmlOcafResource"
set "CSF_MIGRATION_TYPES=@RESOURCE_DIR_PREFIX@\StdResource\MigrationSheet.txt"

rem Draw Harness special stuff
if exist "@RESOURCE_DIR_PREFIX@\DrawResources" (
  set "DRAWHOME=@RESOURCE_DIR_PREFIX@\DrawResources"
  set "CSF_DrawPluginDefaults=@RESOURCE_DIR_PREFIX@\DrawResources"
  
  if exist "@RESOURCE_DIR_PREFIX@\DrawResources\DrawDefault" (
    set "DRAWDEFAULT=@RESOURCE_DIR_PREFIX@\DrawResources\DrawDefault"
  )
)

if exist "@RESOURCE_DIR_PREFIX@\DrawResourcesProducts" (
  set "CSF_DrawPluginProductsDefaults=@RESOURCE_DIR_PREFIX@\DrawResourcesProducts"
)

@RUN_PROJECT@